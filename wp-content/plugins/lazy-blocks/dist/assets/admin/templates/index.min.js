!function(){const{registerPlugin:e}=wp.plugins,{__:t}=wp.i18n,{useCallback:l,useEffect:s}=wp.element,{useSelect:n,useDispatch:a}=wp.data,{PanelRow:o,SelectControl:c}=wp.components,{useDebounce:p}=wp.compose,{PluginDocumentSettingPanel:i}=wp.editPost||{},{used_post_types_for_templates:m}=window.lazyblocksTemplatesData||{};e("lazy-blocks-template",{render:function(){const{templatePostTypes:e,templateLock:u,templateBlocks:r,postTypes:b,blocks:_}=n((e=>{const{getEditedPostAttribute:t}=e("core/editor"),{getPostTypes:l}=e("core"),{getBlocks:s}=e("core/block-editor"),n=t("meta")||{};return{templatePostTypes:n._lzb_template_post_types||[],templateLock:n._lzb_template_lock||"",templateBlocks:n._lzb_template_blocks||"",postTypes:l({show_ui:!0,per_page:-1})||[],blocks:s()}}),[]),{editPost:g}=a("core/editor");function k(e,t){g({meta:{[e]:t}})}function y(e){const t=[];return e.forEach((e=>{const l=[e.name,e.attributes];e.innerBlocks&&e.innerBlocks.length&&l.push(y(e.innerBlocks)),t.push(l)})),t}const w=l(p((function(e,t){const l=encodeURIComponent(JSON.stringify(y(e)));t!==l&&k("_lzb_template_blocks",l)}),500),[]);s((()=>{w(_,r)}),[_,r]);const d=[{label:t("None","lazy-blocks"),value:""},{label:t("All - prevents all operations","lazy-blocks"),value:"all"},{label:t("Insert - prevents inserting new blocks, but allows moving existing ones","lazy-blocks"),value:"insert"},{label:t("Content Only - prevents all operations, except the content editing.","lazy-blocks"),value:"contentOnly"}],h=[],z=[];return b.filter((e=>e.viewable&&"lazyblocks"!==e.slug&&"lazyblocks_templates"!==e.slug&&"attachment"!==e.slug)).forEach((e=>{let{label:t}=e;e.labels&&e.labels.singular_name&&(t=e.labels.singular_name),z.push(e.slug),h.push({label:t,value:e.slug,disabled:m.includes(e.slug)})})),e&&e.length&&e.forEach((e=>{z.includes(e)||h.push({label:e,value:e})})),wp.element.createElement(i,{name:"LZBTemplateSettings",title:t("Template Settings","lazy-blocks"),className:"lzb-template-settings-panel"},wp.element.createElement(o,null,wp.element.createElement("div",{style:{width:"100%"}},wp.element.createElement(c,{label:t("Post Types","lazy-blocks"),multiple:!0,options:h,value:e,onChange:e=>{k("_lzb_template_post_types",e)}}))),wp.element.createElement(o,null,wp.element.createElement("div",{style:{width:"100%"}},wp.element.createElement(c,{label:t("Template Lock","lazy-blocks"),options:d,value:u,onChange:e=>{k("_lzb_template_lock",e)}}))))}})}();